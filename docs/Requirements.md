## 🎫 콘서트 예약 서비스 - 요구사항 정리

### ✅ 기능 요구사항

**1. 유저 대기열 및 토큰 발급**   
   •	유저는 서비스 이용 전 대기열 등록   
   •	대기열 등록 전 잔액 충분한지 확인   
   •	유저 UUID 기반 대기열 등록 후, 대기열 정보를 포함한 토큰 발급   
   •	토큰을 통해 유저의 대기 상태 조회 가능  
   •	대기열을 통과한 유저만 예약/결제 기능 이용 가능  

**2. 예약 가능 날짜 / 좌석 조회**  
   •	예약 가능한 날짜 목록 조회  
   •	선택한 날짜의 예약 가능한 좌석 목록 조회  
   •	좌석은 1~50번으로 구성  

**3. 좌석 예약 요청**   
   •	유저는 날짜 + 좌석번호를 지정하여 예약 요청 가능  
   •	특정 날짜 지정 시 좌석은 최대 4개 동시 예약 가능  
   •	예약 시 해당 좌석들은 유저에게 3분간 임시 배정됨  
   •	3분 내 결제 없을 시 자동 해제  
   •	임시 배정된 좌석은 다른 유저 예약 불가   

**4. 잔액 충전 및 조회**    
   •	유저는 서비스 이용을 위한 잔액 충전 가능  
   •	유저의 현재 잔액 조회 가능  
   •	유저의 포인트 충전/사용 내역 조회 가능  

**5. 결제 처리**  
   •	유저가 결제 요청 시:   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   •	잔액 차감   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   •	결제 내역 생성   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   •	좌석 소유권 영구 배정   
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   •	대기열 토큰 만료   

---

### 🔒 비기능 요구사항

**1. 동시성 제어**   
   •	다중 인스턴스 환경에서도 좌석 중복 예약 불가  
   •	좌석 임시 배정과 결제 사이의 타이밍 이슈 고려  
   •	동시성 처리 필요  

**2. 대기열 시스템**  
   •	요청 순서 보장 : 먼저 대기열 등록한 유저가 먼저 이용 가능  
   •	대기열 상태는 토큰 기반 검증  
   •	유저는 자신의 대기 상태를 확인 가능   

**3. 확장성 / 분산 처리**  
   •	여러 서버 인스턴스에서 동작 가능해야 함  

**4. 테스트**  
   •	각 기능 별 단위 테스트 작성

**5. 임시 점유 타이머**  
   •	좌석 임시 배정 시, 3분 타이머 작동  
   •	3분 내 미결제 시 좌석 점유 자동 해제  
   •	타이머는 스케줄러/워커를 통한 백그라운드 처리   